# bashbot, the Telegram bot written in bash.
# Written by @topkecleon and Juan Potato (@awkward_potato)
# http://github.com/topkecleon/bashbot

# Depends on JSON.sh (http://github.com/dominictarr/JSON.sh),
# which is MIT/Apache-licensed.

# This file is public domain in the USA and all free countries.
# If you're in Europe, and public domain does not exist, then haha.

#!/bin/bash

TOKEN=`cat token`
URL='https://api.telegram.org/bot'$TOKEN
hostname=`hostname`
messageHeader="Host: $hostname"
nlDir="notifyLevels"
#Check for new messages in active mode
cycleSleep=0
#Check for new messages in stand by mode
cycleSleepStandBy=10
#Go to stand by mode after
standByAfter=120

function send_message {
  msg=`echo -e "$messageHeader\n$2"`
  {
    res=$(curl "$URL/sendMessage" -F "chat_id=$1" -F "text=$msg")
  } &>/dev/null
}
function send_markdown_message {
  msg=`echo -e "$messageHeader\n$2"`
  {
    res=$(curl "$URL/sendMessage" -F "chat_id=$1" -F "text=$msg" -F "parse_mode=markdown")
  } &>/dev/null
}
function send_doc {
  {
    res=$(curl "$URL/sendDocument" -F "chat_id=$1" -F "document=@$2")
  } &>/dev/null
}
function send_photo() {
  res=$(curl "$URL/sendPhoto" -F "chat_id=$1" -F "photo=@$2")
}
